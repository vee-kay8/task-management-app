# ============================================================
# ENVIRONMENT VARIABLES - DOCKER COMPOSE CONFIGURATION
# ============================================================
# Instructions:
# 1. Copy this file: cp .env.example .env
# 2. Update values for your environment
# 3. NEVER commit .env to version control (already in .gitignore)
# 4. For production, generate secure random keys (see instructions below)
#
# Environment Detection:
# - Use 'development' for local development
# - Use 'production' for deployed environments
# ============================================================

# ===================================
# DATABASE CONFIGURATION
# ===================================
# PostgreSQL Database Settings
# Note: For Docker Compose, use service name 'db' as host
POSTGRES_DB=taskmanagement_db
POSTGRES_USER=taskapp_user
POSTGRES_PASSWORD=devpassword123

# Database Connection URL
# For Docker: Use service name 'db' instead of 'localhost'
# For Local: Use 'localhost' or '127.0.0.1'
DATABASE_URL=postgresql://taskapp_user:devpassword123@db:5432/taskmanagement_db

# Database Pool Settings (optional)
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10

# ===================================
# BACKEND (Flask) CONFIGURATION
# ===================================
# Flask Application Settings
FLASK_APP=run.py
FLASK_ENV=development
FLASK_DEBUG=True

# Server Configuration
FLASK_HOST=0.0.0.0
FLASK_PORT=5000

# Security Keys - CRITICAL: Change these in production!
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=dev-secret-key-change-in-production-use-random-64-char-hex
JWT_SECRET_KEY=dev-jwt-secret-key-change-in-production-use-random-64-char-hex

# Production Security Keys Example (DO NOT USE THESE!):
# SECRET_KEY=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0e1f2
# JWT_SECRET_KEY=z9y8x7w6v5u4t3s2r1q0p9o8n7m6l5k4j3i2h1g0f9e8d7c6b5a4z3y2x1w0v9u8

# ===================================
# JWT AUTHENTICATION
# ===================================
# JWT Token Expiration (in seconds)
JWT_ACCESS_TOKEN_EXPIRES=3600        # 1 hour
JWT_REFRESH_TOKEN_EXPIRES=2592000    # 30 days

# JWT Algorithm
JWT_ALGORITHM=HS256

# ===================================
# FRONTEND (Next.js) CONFIGURATION
# ===================================
# API Endpoint Configuration
# For browser requests, use localhost (client-side)
# For server-side requests, use service name 'backend'
NEXT_PUBLIC_API_URL=http://localhost:5000/api

# ===================================
# CORS SETTINGS
# ===================================
# Allowed Origins (comma-separated)
# For Docker: Include both localhost and service names
CORS_ORIGINS=http://localhost:3000,http://frontend:3000

# Additional CORS Settings
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=3600

# ===================================
# DOCKER CONFIGURATION
# ===================================
# Container Settings
COMPOSE_PROJECT_NAME=task-management-app

# Timezone
TZ=UTC

# ===================================
# APPLICATION SETTINGS
# ===================================
# Pagination settings
ITEMS_PER_PAGE=20

# Application name
APP_NAME=Task Management App

# API version
API_VERSION=v1

# Log Level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# ===================================
# AWS S3 CONFIGURATION (Future Phase)
# ===================================
# AWS credentials for file storage
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-east-1
S3_BUCKET_NAME=taskmanagement-attachments
HOSTNAME=0.0.0.0

# Disable Next.js Telemetry
NEXT_TELEMETRY_DISABLED=1

# ===================================
# CORS SETTINGS
# ===================================
# Frontend URL for CORS (comma-separated for multiple origins)
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# ===================================
# REDIS CONFIGURATION (Optional)
# ===================================
# For caching and session storage
# For Docker: Use service name 'redis'
# For Local: Use 'localhost'
REDIS_URL=redis://redis:6379/0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# ===================================
# FILE UPLOAD SETTINGS
# ===================================
# Maximum file size in MB
MAX_FILE_SIZE_MB=10

# Allowed file extensions (comma-separated)
ALLOWED_EXTENSIONS=pdf,doc,docx,xls,xlsx,jpg,jpeg,png,gif

# Upload directory (inside container)
UPLOAD_FOLDER=/app/uploads

# ===================================
# PRODUCTION DEPLOYMENT CHECKLIST
# ===================================
# Before deploying to production, ensure you:
#
# 1. Generate Strong Keys:
#    SECRET_KEY=$(python -c "import secrets; print(secrets.token_hex(32))")
#    JWT_SECRET_KEY=$(python -c "import secrets; print(secrets.token_hex(32))")
#
# 2. Update Database Credentials:
#    - Change POSTGRES_PASSWORD to a strong random password
#    - Update DATABASE_URL with new password
#
# 3. Set Production Environment:
#    FLASK_ENV=production
#    FLASK_DEBUG=False
#    NODE_ENV=production
#
# 4. Update URLs:
#    - Set NEXT_PUBLIC_API_URL to your production API domain
#    - Update CORS_ORIGINS to your production frontend domain
#
# 5. Enable HTTPS:
#    - Update all URLs to use https:// instead of http://
#    - Configure SSL/TLS certificates
#
# 6. Database Backups:
#    - Set up automated database backup schedule
#    - Test restoration process
#
# 7. Monitoring & Logging:
#    - Configure centralized logging
#    - Set up application monitoring
#    - Configure alerting for errors
#
# 8. Security:
#    - Enable Docker secrets or external secret management
#    - Implement rate limiting
#    - Configure firewall rules
#    - Regular security updates
#
# 9. Performance:
#    - Set appropriate DB_POOL_SIZE based on load
#    - Configure caching (Redis)
#    - Enable CDN for static assets
#
# 10. Documentation:
#     - Document deployment process
#     - Create runbook for common issues
#     - Document backup/restore procedures

# ===================================
# APPLICATION SETTINGS
# ===================================
# Pagination settings
ITEMS_PER_PAGE=20

# Application name
APP_NAME=Task Management App

# API version
API_VERSION=v1
